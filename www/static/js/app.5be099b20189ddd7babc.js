webpackJsonp([1],{"7zck":function(t,e){},F11F:function(t,e){},Gmzw:function(t,e){},HQ1b:function(t,e){},ID16:function(t,e){},"Ih1/":function(t,e,s){t.exports=s.p+"static/img/beetle.de5b274.png"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),a=s.n(n),i=(s("u7Vc"),s("7+uW")),r=s("3EgV"),c=s.n(r);s("7zck"),s("s6ZO");i.default.use(c.a);var o=s("/ocq");i.default.use(o.a);var u,l,d,p,v,h=new o.a({}),f=s("Xxa5"),m=s.n(f),x=s("exGp"),g=s.n(x),_=s("NYxO"),b=function(){return"1"},S=function(){return"https://beetle-backend.herokuapp.com/api/"},C=s("mtWM"),w=s.n(C),E=this,T={aviableboxes:(v=g()(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post(S+"getaviableboxes",{branchid:b()});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,E)})),function(){return v.apply(this,arguments)}),inuseboxes:(p=g()(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post(S+"getinuseboxes",{branchid:b()});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,E)})),function(){return p.apply(this,arguments)}),getallboxes:(d=g()(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post(S()+"getallboxes",{branchid:b()});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,E)})),function(){return d.apply(this,arguments)}),deletetransaction:(l=g()(m.a.mark(function t(e){var s,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e,t.next=3,w.a.post(S+"checkout",{transactionid:s});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,E)})),function(t){return l.apply(this,arguments)}),renting:(u=g()(m.a.mark(function t(e){var s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post(S()+"renting",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},t,E)})),function(t){return u.apply(this,arguments)})},A=this;i.default.use(_.a);var y,B=new _.a.Store({state:{status:{menu:"hello",step:"",isOpen:!1,data:{passcode:"",repasscode:""}},selectedBox:[],peripheral:null,faceID:null,tel:null,boxes:[],transactions:[],updateBoxs:!1,updateTransactions:!1,passcodeAttemp:0,startApp:!1,phonenumber:"",openBox:"CLOSE"},getters:{startApp:function(t){return t.startApp},isMenu:function(t){return t.status.menu},isStep:function(t){return t.status.step},isOpen:function(t){return t.status.isOpen},getData:function(t){return t.status.data},passcode:function(t){return t.status.data.passcode},repasscode:function(t){return t.status.data.repasscode},getSelectedBox:function(t){return t.selectedBox},getPeripheral:function(t){return t.peripheral},getFaceID:function(t){return t.faceID},getTel:function(t){return t.tel},getBoxes:function(t){return t.boxes},getTransactions:function(t){return t.transactions},updateBoxs:function(t){return t.updateBoxs},updateTransactions:function(t){return t.updateTransactions},passcodeAttemp:function(t){return t.passcodeAttemp},phonenumber:function(t){return t.phonenumber},openBox:function(t){return t.openBox}},mutations:{SET_PHONENUMBER:function(t,e){t.phonenumber=e},START_APP:function(t,e){t.startApp=e},CLEAR_ATTEMP:function(t){t.passcodeAttemp=0},INCREASE_ATTEMP:function(t){t.passcodeAttemp++},SET_UPDATEBOXS:function(t,e){t.updateBoxs=e},SET_UPDATETRANSACTIONS:function(t,e){t.updateTransactions=e},CLEAR_DETAILS:function(t){t.status.data.passcode="",t.status.data.repasscode="",t.peripheral=null,t.faceID=null,t.tel=null,t.selectedBox=[]},SET_BOXES:function(t,e){t.boxes=e},SET_TEL:function(t,e){t.tel=e},SET_FACEID:function(t,e){t.faceID=e},SET_PERIPHERAL:function(t,e){t.peripheral=e},CLEAR_PERIPHERAL:function(t){t.peripheral=[]},ADDSELECTED_BOX:function(t,e){t.selectedBox.push(e)},CLEAR_SELECTEDBOX:function(t){t.selectedBox=[]},boxview:function(t,e){t.boxview=e},menu:function(t,e){t.menu=e},SET_MENU:function(t,e){t.status.menu=e},SET_STEP:function(t,e){t.status.step=e},SET_DATA:function(t,e){t.status.data=e},SET_PASSCODE:function(t,e){t.status.data.passcode=e},SET_REPASSCODE:function(t,e){t.status.data.repasscode=e},SET_ISOPEN:function(t,e){t.status.isOpen=e},SET_TRANSACTIONS:function(t,e){t.transactions=e},CHANGE_BOX_STATE:function(t,e){t.openBox=e}},actions:{setUpdateBoxs:function(t,e){return(0,t.commit)("SET_UPDATEBOXS",e)},setUpdateTransactions:function(t,e){return(0,t.commit)("SET_UPDATETRANSACTIONS",e)},clearDetails:function(t){return(0,t.commit)("CLEAR_DETAILS")},setMenu:function(t,e){return(0,t.commit)("SET_MENU",e)},setStep:function(t,e){return(0,t.commit)("SET_STEP",e)},setData:function(t,e){return(0,t.commit)("SET_DATA",e)},setPasscode:function(t,e){return(0,t.commit)("SET_PASSCODE",e)},setRepasscode:function(t,e){return(0,t.commit)("SET_REPASSCODE",e)},setSelectedBox:function(t,e){(0,t.commit)("ADDSELECTED_BOX",e)},setPeripheral:function(t,e){return(0,t.commit)("SET_PERIPHERAL",e)},clearPeripheral:function(t,e){return(0,t.commit)("CLEAR_PERIPHERAL")},setFaceID:function(t,e){return(0,t.commit)("SET_FACEID",e)},setTel:function(t,e){return(0,t.commit)("SET_TEL",e)},setBoxes:(y=g()(m.a.mark(function t(e){var s,n=e.commit;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.getallboxes();case 3:s=t.sent,console.log(s),n("START_APP",!0),n("SET_BOXES",s.data.boxes),console.log("BOX_FETCHED"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),n("START_APP",!1);case 14:case"end":return t.stop()}},t,A,[[0,10]])})),function(t){return y.apply(this,arguments)}),setIsOpen:function(t,e){return(0,t.commit)("SET_ISOPEN",e)},clearSelectedBox:function(t){return(0,t.commit)("CLEAR_SELECTEDBOX")},setTransactions:function(t,e){return(0,t.commit)("SET_TRANSACTIONS",e)},passcodeAttempInc:function(t){return(0,t.commit)("INCREASE_ATTEMP")},clearAttemp:function(t){return(0,t.commit)("CLEAR_ATTEMP")},appStart:function(t){return(0,t.commit)("START_APP",payload)},setPhonenumber:function(t,e){return(0,t.commit)("SET_PHONENUMBER",e)},setBoxState:function(t,e){return(0,t.commit)("CHANGE_BOX_STATE",e)}}}),O=s("Dd8w"),k=s.n(O),P={name:"outline-label",props:{label:String}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"border center",staticStyle:{"background-color":"#1867c0 !important"}},[e("div",{staticClass:"label",staticStyle:{color:"azure"}},[this._v(" \n        "+this._s(this.label)+"\n    ")])])},staticRenderFns:[]};var R=s("VU/8")(P,M,!1,function(t){s("ID16")},null,null).exports,D=["isMenu","isStep","getData","passcode","repasscode","getSelectedBox","getTel","getBoxs","getTransactions","getFaceID","isOpen","updateTransactions","updateBoxs","passcodeAttemp","getPeripheral","startApp","openBox","phonenumber"],I=["setMenu","setStep","setData","setPasscode","setRepasscode","setBoxes","clearSelectedBox","updateBoxChange","setTransactions","setUpdateBoxs","setUpdateTransactions","setIsOpen","passcodeAttempInc","clearAttemp","setPeripheral","setBoxState","clearDetails","clearPeripheral"],F={name:"mainMenu",methods:k()({},Object(_.b)(["setMenu","setStep","setIsOpen"]),{nextTolist:function(){this.setMenu("list"),this.setStep("1")},nextToOpen:function(){this.setIsOpen(!0),this.setMenu("faceReg")}})},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container center content"},[e("div",[e("v-btn",{staticClass:"menu-btn",on:{click:this.nextTolist}},[this._v("Rent a box")])],1),this._v(" "),e("div",[e("v-btn",{staticClass:"menu-btn",on:{click:this.nextToOpen}},[this._v("Open a box")])],1)])},staticRenderFns:[]};var U=s("VU/8")(F,N,!1,function(t){s("zqwB")},"data-v-7b9bb816",null).exports,L={name:"boxrenting",props:["name","id"],data:function(){return{tel:""}},mounted:function(){},methods:k()({},Object(_.b)(["setMenu","setStep","setData","clearSelectedBox","setPeripheral","setPhonenumber"]),{rent:function(){var t=g()(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.tel.length>0&&(this.setPhonenumber(this.tel),this.setMenu("faceReg"),this.setStep("3"));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goback:function(){this.clearSelectedBox(),this.setMenu("list"),this.setStep("1")}}),computed:k()({},Object(_.c)(["isMenu","isStep","getData","getSelectedBox"]))},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"center"},[s("div",{staticStyle:{color:"#3B5998","font-size":"72px"}},[t._v(t._s(t.getSelectedBox[0].name))]),t._v(" "),s("div",{staticStyle:{"font-size":"64px","margin-bottom":"25px"}},[t._v(t._s(t.getSelectedBox[0].price)+" Baht/hr")]),t._v(" "),s("div",{staticStyle:{"font-size":"18px",color:"#FF0000","margin-bottom":"35px"}},[t._v("Input your to telephone number in case of forgot your box")]),t._v(" "),s("div",{staticStyle:{"margin-top":"25px","margin-bottom":"10px","margin-left":"20%"}},[s("v-text-field",{staticStyle:{width:"95%"},attrs:{label:"Solo",placeholder:"Telephone No.",solo:""},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1),t._v(" "),s("div",{staticStyle:{"margin-bottom":"25px"}},[s("v-btn",{staticStyle:{width:"330px",height:"100px","background-color":"#3B5998",color:"#FFFFFF","font-size":"28px"},on:{click:function(e){t.rent()}}},[t._v("Rent a box")])],1),t._v(" "),s("div",[s("v-btn",{staticStyle:{width:"330px",height:"100px","font-size":"28px"},on:{click:this.goback}},[t._v("Back to box select")])],1)])])},staticRenderFns:[]};var j=s("VU/8")(L,z,!1,function(t){s("F11F")},null,null).exports,X={name:"box",props:{name:String,status:String,uuid:String,price:Number,index:Number},data:function(){return{id:this.uuid}},methods:k()({},Object(_.b)(["setMenu","setStep","setData","setSelectedBox"]),{next:function(){var t={id:this.id,name:this.name,price:this.price,status:"1"};console.log(t),this.setSelectedBox(t),this.setMenu("renting"),this.setStep("2")}}),mounted:function(){},computed:k()({},Object(_.c)(["isMenu","isStep","data"]))},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"h-center",staticStyle:{"text-align":"center",margin:"0px",height:"21vh","background-color":"#33c0ca"},attrs:{flat:"",tile:""}},[t._v(" \n      "+t._s(t.name)+"      \n        "),s("v-btn",{on:{click:function(e){t.next()}}},[t._v("click")])],1)],1)},staticRenderFns:[]},$=s("VU/8")(X,H,!1,null,null,null).exports,V={name:"boxlist",data:function(){return{boxes:[]}},methods:k()({},Object(_.b)(["setMenu","setStep","setData"]),{onScroll:function(t){this.offsetTop=t.target.scrollTop}}),beforeMount:function(){var t=this;return g()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.boxes=t.getBoxes;case 1:case"end":return e.stop()}},e,t)}))()},components:{Box:$},mounted:function(){},computed:k()({},Object(_.c)(["getBoxes"]))},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"scroll-y",staticStyle:{"max-height":"86vh","min-height":"86vh","background-color":"#DBD8D8"},attrs:{id:"scroll-target"}},[e("v-card",{staticStyle:{border:"0px","background-color":"#DBD8D8"}},[e("v-layout",{directives:[{name:"scroll",rawName:"v-scroll:#scroll-target",value:this.onScroll,expression:"onScroll",arg:"#scroll-target"}],attrs:{row:"",wrap:""}},this._l(this.boxes,function(t,s){return e("v-flex",{key:t.uuid,staticClass:"flex-padding",attrs:{xs4:""}},[e("box",{staticStyle:{margin:"5% 5% 5% 5%"},attrs:{index:s,price:t.price,name:t.name,status:t.status,uuid:t.id}})],1)}))],1)],1)},staticRenderFns:[]};var W=s("VU/8")(V,Q,!1,function(t){s("Wq7f")},null,null).exports,q={name:"receipt",data:function(){return{time:5,alert:!1}},computed:k()({},Object(_.c)(D)),mounted:function(){this.countdown()},methods:k()({},Object(_.b)(I),{countdown:function(){var t=this,e=setInterval(function(){t.time-=1,0==t.time&&(t.showAlert(),clearInterval(e))},1e3)},showAlert:function(){var t=g()(m.a.mark(function t(){var e=this;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.alert=!0,setTimeout(function(){e.setMenu("hello"),e.setStep("0"),e.alert=!1},3e3);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"center"},[t._m(0),t._v(" "),s("div",{staticStyle:{color:"green","font-size":"350%"}},[t._v("Successfully")]),t._v(" "),s("div",{staticClass:"margin",staticStyle:{"font-size":"250%"}},[t._v(t._s(t.getSelectedBox.name))]),t._v(" "),s("div",{staticStyle:{"font-size":"250%"}},[t._v("Box will open in "+t._s(t.time)+" second")]),t._v(" "),s("v-dialog",{attrs:{width:"500"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2 center",attrs:{"primary-title":""}},[t._v("\n                    Thank you\n                ")]),t._v(" "),s("v-card-text",{staticClass:"center"},[t._v("\n                    Thank you for choosing us. Your box is opened\n                ")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticStyle:{width:"35%",height:"35%"},attrs:{src:s("X8zv"),alt:""}})])}]};var G=s("VU/8")(q,K,!1,function(t){s("Gmzw")},"data-v-9c3943a0",null).exports,Z={name:"rentingstep",data:function(){return{}},methods:k()({},Object(_.b)(["setMenu","setStep","setData","clearSelectedBox","isOpen"]),{backToMenu:function(){this.clearSelectedBox(),this.setMenu("hello"),this.setStep("0")}}),watch:{isStep:function(){var t=g()(m.a.mark(function t(e,s){var n,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=parseInt(e)-1,s=parseInt(s)-1,n=this.$refs.step.children[e],a=this.$refs.step.children[s],s<0?n.classList.add("inActive"):(n.classList.add("inActive"),a.classList.remove("inActive"));case 5:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}()},computed:k()({},Object(_.c)(["isMenu","isStep","data"])),mounted:function(){this.setStep("1")}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"step"},[s("div",{ref:"1",staticClass:"inActive",attrs:{id:"0"}},[t._v("1. Select a Beetle box")]),t._v(" "),s("div",{ref:"2",attrs:{id:"1"}},[t._v("2. Comfirm renting")]),t._v(" "),s("div",{ref:"3",attrs:{id:"2"}},[t._v("3. Face Recognition")]),t._v(" "),s("div",{ref:"4",attrs:{id:"3"}},[t._v("4. Set passcode")]),t._v(" "),s("div",{ref:"5",attrs:{id:"4"}},[t._v("5. Confirm passcode")]),t._v(" "),s("div",{ref:"6",attrs:{id:"5"}},[t._v("6. Success")]),t._v(" "),1==t.isStep||2==t.isStep||3==t.isStep||4==t.isStep||5==t.isStep&&0==t.isOpen?s("div",{staticStyle:{position:"absolute",bottom:"0",width:"85%"}},[s("v-btn",{staticClass:"menu-btn",staticStyle:{width:"100%",height:"6vh","background-color":"#3B5998",margin:"8% 0% 8% 0%","font-size":"100%",color:"#FFFFFF"},on:{click:t.backToMenu}},[t._v("Back to menu")])],1):t._e()])},staticRenderFns:[]},J=s("VU/8")(Z,Y,!1,null,null,null).exports,tt=s("//Fk"),et=s.n(tt),st={turnONOFF:function(t,e){for(var s=0;s<t.characteristics.length;s++){var n=t.characteristics[s];if("Write"==n.properties){for(var a=new Uint8Array(e.length),i=0,r=e.length;i<r;i++)a[i]=e.charCodeAt(i);ble.write(t.id,n.service,n.characteristic,a.buffer,function(){console.log("Success")},function(){console.log("Fail")})}}},stringToBytes:function(t){for(var e=new Uint8Array(t.length),s=0,n=t.length;s<n;s++)e[s]=t.charCodeAt(s);return e.buffer},bleConnect:function(t){return new et.a(function(e,s){ble.connect(t,function(t){return console.log("Connected"),e(t)})})},openBox:function(t){this.turnONOFF(t,"ON")},closeBox:function(t){this.turnONOFF(t,"OFF")}},nt={name:"faceReg",data:function(){return{faceid:"",alert:!1,loading:!1,facefail:!1}},methods:k()({},Object(_.b)(I),{startCameraAbove:function(){CameraPreview.startCamera({x:50,y:50,width:819,height:614,toBack:!1,previewDrag:!1,tapPhoto:!0})},startCameraBelow:function(){CameraPreview.startCamera({x:50,y:50,width:300,height:300,camera:"front",tapPhoto:!0,previewDrag:!1,toBack:!0})},stopCamera:function(){CameraPreview.stopCamera()},takePicture:function(){var t,e=this;CameraPreview.takePicture((t=g()(m.a.mark(function t(s){var n,a,i,r,c,o,u,l,d,p,v,h,f,x,g,_,b,S,C,w,E,T;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.hide(),e.loading=!0,t.prev=2,n=s.toString(),a=atob(n.replace(/\s/g,"")),i=a.length,r=new ArrayBuffer(i),c=new Uint8Array(r),o=0;o<i;o++)c[o]=a.charCodeAt(o);return u=new Blob([c],{type:"image/jpeg"}),l=Number(new Date),d=e.$storage.child("photos/"+l+".jpeg"),t.next=14,d.put(u);case 14:return t.sent,t.next=17,d.getDownloadURL();case 17:return p=t.sent,v={url:"https://southeastasia.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true&returnFaceLandmarks=false",data:{url:p},method:"POST",headers:{"Ocp-Apim-Subscription-Key":"863c391b338e49e7995d2fdeb9a4477c"}},t.next=21,e.axios(v);case 21:if(h=t.sent,f=h.data[0].faceId,1!=e.isOpen){t.next=61;break}return t.next=26,e.axios.post("https://beetle-backend.herokuapp.com/api/getinusefaceid",{branchid:1});case 26:return x=t.sent,g=x.data.facesid,_=[],g.forEach(function(t){_.push(t.faceid)}),_.push(f),b={url:"https://southeastasia.api.cognitive.microsoft.com/face/v1.0/group",method:"POST",headers:{"Ocp-Apim-Subscription-Key":"863c391b338e49e7995d2fdeb9a4477c"},data:{faceIds:_}},t.prev=32,t.next=35,e.axios(b);case 35:if(2!=(S=t.sent).data.groups[0].length){t.next=52;break}return C=S.data.groups[0].filter(function(t){return t!=f}),w=g.filter(function(t){return t.faceid==C}),E=w[0].boxid,t.next=42,st.bleConnect(E);case 42:T=t.sent,e.setPeripheral(T),e.setBoxState("OPEN"),e.setUpdateBoxs(!0),e.loading=!1,e.hide(),e.alert=!0,setTimeout(function(){e.isOpen=!1,e.alert=!1,e.setMenu("hello")},2e3),t.next=54;break;case 52:e.facefail=!0,setTimeout(function(){e.facefail=!1,e.setMenu("passcode")},3e3);case 54:t.next=59;break;case 56:t.prev=56,t.t0=t.catch(32),console.log(t.t0);case 59:t.next=62;break;case 61:null!=f&&(e.loading=!1,e.setFaceID(f),e.setMenu("passcode"),e.setStep("4"));case 62:t.next=68;break;case 64:t.prev=64,t.t1=t.catch(2),console.log("ERROR"),console.log(t.t1);case 68:case"end":return t.stop()}},t,e,[[2,64],[32,56]])})),function(e){return t.apply(this,arguments)}))},switchCamera:function(){CameraPreview.switchCamera()},show:function(){CameraPreview.show()},hide:function(){CameraPreview.hide()},changeColorEffect:function(){var t=document.getElementById("selectColorEffect").value;CameraPreview.setColorEffect(t)},changeFlashMode:function(){var t=document.getElementById("selectFlashMode").value;CameraPreview.setFlashMode(t)},changeZoom:function(){var t=document.getElementById("zoomSlider").value;document.getElementById("zoomValue").innerHTML=t,CameraPreview.setZoom(t)},changePreviewSize:function(){window.smallPreview=!window.smallPreview,window.smallPreview?CameraPreview.setPreviewSize({width:100,height:100}):CameraPreview.setPreviewSize({width:window.screen.width,height:window.screen.height})},showSupportedPictureSizes:function(){CameraPreview.getSupportedPictureSizes(function(t){t.forEach(function(t){console.log(t.width+"x"+t.height)})})}}),computed:k()({},Object(_.c)(D)),watch:{isOpen:function(t){0==t&&(this.alert=!1)}},mounted:function(){var t=this;this.show(),this.startCameraAbove(),setTimeout(function(){t.takePicture()},3e3)}},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{width:"500"},model:{value:t.facefail,callback:function(e){t.facefail=e},expression:"facefail"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2 center",attrs:{"primary-title":""}},[t._v("\n                    No face deteced!!\n                ")]),t._v(" "),s("v-card-text",{staticClass:"center"},[t._v("\n                    Please use passcode\n                ")])],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"500"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2 center",attrs:{"primary-title":""}},[t._v("\n                    Thank you\n                ")]),t._v(" "),s("v-card-text",{staticClass:"center"},[t._v("\n                    Thank you for choosing us. Your box is opened\n                ")])],1)],1),t._v(" "),s("v-dialog",{attrs:{persistent:"",width:"300",lazy:""},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("v-card",{attrs:{color:"indigo",dark:""}},[s("v-card-text",[t._v("\n          Loading...\n          "),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},staticRenderFns:[]};var it=s("VU/8")(nt,at,!1,function(t){s("HQ1b")},"data-v-1baf1bae",null).exports,rt={name:"passcodepad",data:function(){return{code:[]}},methods:k()({},Object(_.b)(["setMenu","setStep","setData","setPasscode","setRepasscode","setIsOpen"]),{addCode:function(t){this.code.push(t)}}),watch:{passcode:function(t){var e=this;6==this.code.length&&("passcode"==this.isMenu&&0==this.isOpen?(this.setPasscode(this.passcode),this.setMenu("repasscode"),setTimeout(function(){e.code=[]},500)):"repasscode"==this.isMenu&&0==this.isOpen?(this.setRepasscode(this.passcode),this.setMenu("checkpasscode"),setTimeout(function(){e.code=[]},500)):"passcode"==this.isMenu&&1==this.isOpen&&(this.setPasscode(this.passcode),this.setMenu("openByPasscode"),setTimeout(function(){e.code=[]},500)))}},computed:k()({},Object(_.c)(["isMenu","isStep","getData","passcode","repasscode","isOpen"]),{passcode:function(){var t="";return this.code.forEach(function(e){t+=e.toString()}),t}})},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"background"},[s("div",{staticClass:"center"},[s("v-layout",{attrs:{row:"",wrap:""}},[0==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),1==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),2==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),3==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),4==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"}),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),5==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"})]):t._e(),t._v(" "),6==t.code.length?s("v-flex",{staticClass:"h-center",staticStyle:{"margin-bottom":"15px"},attrs:{xs12:""}},[s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")]),t._v(" "),s("div",{staticClass:"dashed"},[t._v("•")])]):t._e(),t._v(" "),t._l(9,function(e){return s("v-flex",{key:e,staticClass:"flex-padding circle",attrs:{xs4:""}},[s("div",{staticClass:"circleNo ripple",on:{click:function(s){t.addCode(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])])}),t._v(" "),s("v-flex",{staticClass:"circle",attrs:{row:""}},[s("div",{staticClass:"circleNo ripple",on:{click:function(e){t.addCode(0)}}},[t._v("\n                        0\n                    ")])])],2)],1)])])},staticRenderFns:[]};var ot=s("VU/8")(rt,ct,!1,function(t){s("yHQA")},"data-v-37359aba",null).exports,ut={computed:k()({},Object(_.c)(D)),methods:k()({},Object(_.b)(I)),watch:{isMenu:function(){var t=g()(m.a.mark(function t(e){var s,n,a,i=this;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("checkpasscode"!=e){t.next=5;break}console.log(e),""!=this.repasscode&&""!=this.passcode&&(this.dialog=!0,this.repasscode==this.passcode?(this.setUpdateTransactions(!0),this.setUpdateBoxs(!0),setTimeout(function(){i.dialog=!1,i.setMenu("receipt"),i.setStep("6")},1e3)):setTimeout(function(){console.log("not match"),i.setMenu("passcode"),i.setStep("4"),i.dialog=!1},1e3)),t.next=36;break;case 5:if("openByPasscode"!=e||1!=this.isOpen){t.next=10;break}1==this.checkTransactionPasscode(this.passcode)?(this.alert=!0,this.setUpdateTransactions(!0),this.setUpdateBoxs(!0),setTimeout(function(){i.setMenu("hello"),i.setIsOpen(!1),i.alert=!1},2e3)):(this.setMenu("passcode"),this.passcodeAttempInc()),t.next=36;break;case 10:if("renting"!=e){t.next=23;break}return t.prev=11,t.next=14,st.bleConnect(this.getSelectedBox[0].id);case 14:s=t.sent,this.setPeripheral(s),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),console.log(t.t0);case 21:t.next=36;break;case 23:if("receipt"!=e){t.next=36;break}return n={boxid:this.getSelectedBox[0].id,passcode:this.passcode,faceid:this.getFaceID,phonenumber:this.phonenumber,branchid:b()},t.prev=25,t.next=28,T.renting(n);case 28:a=t.sent,console.log(a.data),this.setBoxState("OPEN"),t.next=36;break;case 33:t.prev=33,t.t1=t.catch(25),console.log(t.t1);case 36:case"end":return t.stop()}},t,this,[[11,18],[25,33]])}));return function(e){return t.apply(this,arguments)}}(),updateBoxs:function(){var t=g()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1==e&&0==this.isOpen||1==e&&1==this.isOpen||1==e&&1==this.isOpen&&this.passcodeAttemp;case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),passcodeAttemp:function(){var t=g()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:3==e&&(this.setMenu("hello"),this.setUpdateTransactions(!0),this.clearAttemp());case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),isOpen:function(){var t=g()(m.a.mark(function t(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),openBox:function(t){var e=this;"OPEN"==t&&(console.log("BOX OPENED"),st.openBox(this.getPeripheral),setTimeout(function(){console.log("BOX CLOESE"),st.closeBox(e.getPeripheral),e.setBoxState("CLOSE"),e.clearDetails(),e.clearPeripheral()},5e3))}}},lt={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},dt={name:"mainpage",components:{hello:U,renting:j,list:W,RentingStep:J,OutlineLabel:R,faceReg:it,passcode:ot,repasscode:ot,checkpasscode:ot,receipt:G,watcher:s("VU/8")(ut,lt,!1,null,null,null).exports},data:function(){return{dialog:!1,boxs:[],alert:!1}},watch:{startApp:function(t){var e=this;1==t&&setTimeout(function(){e.dialog=!1},500)}},computed:k()({},Object(_.c)(D)),methods:k()({},Object(_.b)(I)),beforeMount:function(){var t=this;return g()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t.dialog=!0,t.setBoxes()}catch(t){console.log(t)}case 1:case"end":return e.stop()}},e,t)}))()}},pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticClass:"fullscreen fontcolor"},[n("v-layout",{staticClass:"background-img",attrs:{row:"",wrap:""}},[n("v-flex",{staticStyle:{padding:"0px","padding-top":"0px","padding-left":"0px","border-shadow":"0px"},attrs:{xs4:""}},[n("div",{staticStyle:{"max-height":"100vh","min-height":"100vh",border:"0px"},attrs:{id:"scroll-target"}},[n("v-card",{staticClass:"sidebar"},[n("div",{staticClass:"sidebarheader"},[n("div",{staticStyle:{"margin-top":"4%"}},[n("img",{staticClass:"sidebar-logo",attrs:{src:s("X8zv")}})]),t._v(" "),n("div",{staticClass:"sidebar-text"},[t._v("\n                            SMART MOBILE LOCKER\n                        ")])]),t._v(" "),n("div",{staticClass:"sidebartitle center"},[t._v("Instruction")]),t._v(" "),n("div",{staticClass:"content-container"},[n("div",{staticClass:"sidebarcontent sidebarcontentText"},[n("transition",{attrs:{name:"slide-y-transition"}},["hello"==t.isMenu?n("div",[n("div",{staticClass:"inActive"},[t._v("1. Select Menu")])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},["list"==t.isMenu||"renting"==t.isMenu||"faceReg"==t.isMenu||"passcode"==t.isMenu||"repasscode"==t.isMenu||"receipt"==t.isMenu||"checkpasscode"==t.isMenu?n("div",{ref:"boxview"},[n("renting-step")],1):t._e()])],1)])])],1)]),t._v(" "),n("v-flex",{staticStyle:{padding:"0px","padding-left":"0px","padding-top":"0px"},attrs:{xs8:""}},[n("div",{staticClass:"navbar"},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs2:""}},[n("div",{staticClass:"h-center",staticStyle:{"min-height":"14vh","max-height":"14vh"}},[n("img",{staticClass:"navBeetle",attrs:{src:s("Ih1/"),alt:""}})])]),t._v(" "),n("v-flex",{attrs:{xs10:""}},[n("div",{staticClass:"h-center",staticStyle:{"min-height":"14vh","max-height":"14vh",padding:"4% 4% 4% 0%"}},["hello"==t.isMenu?n("div",{staticClass:"navHeader h-center"},[t._v("\n                      Welcome\n                    ")]):t._e(),t._v(" "),"list"==t.isMenu||"renting"==t.isMenu||"faceReg"==t.isMenu||"passcode"==t.isMenu||"repasscode"==t.isMenu||"receipt"==t.isMenu||"checkpasscode"==t.isMenu&&0==t.isOpen?n("div",{staticClass:"navHeader h-center"},[n("transition",{attrs:{name:"fade"}},[1==t.isStep?n("div",[t._v("Select a Beetle box")]):2==t.isStep?n("div",[t._v("Comfirm renting")]):3==t.isStep?n("div",[t._v("Face Recognitio")]):4==t.isStep?n("div",[t._v("Set passcode")]):5==t.isStep?n("div",[t._v("Confirm passcode")]):6==t.isStep?n("div",[t._v("Success")]):t._e()])],1):t._e()])])],1)],1),t._v(" "),n("div",{staticClass:"content"},[n("transition",{attrs:{name:"fade"}},[n(t.isMenu,{tag:"component"})],1)],1)])],1),t._v(" "),n("v-dialog",{attrs:{persistent:"",width:"300",lazy:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",{attrs:{color:"indigo",dark:""}},[n("v-card-text",[t._v("\n          Loading...\n          "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2 center",attrs:{"primary-title":""}},[t._v("\n                    Thank you\n                ")]),t._v(" "),n("v-card-text",{staticClass:"center"},[t._v("\n                    Thank you for choosing us. Your box is opened\n                ")])],1)],1),t._v(" "),n("watcher")],1)},staticRenderFns:[]};var vt={name:"app",beforeMount:function(){var t=this;return g()(m.a.mark(function e(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},components:{MainPage:s("VU/8")(dt,pt,!1,function(t){s("PvA9"),s("cP3D")},"data-v-7d25aef2",null).exports}},ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("main-page")],1)},staticRenderFns:[]};var ft=s("VU/8")(vt,ht,!1,function(t){s("QNNt")},"data-v-6f27018d",null).exports,mt=s("Rf8U"),xt=s.n(mt),gt=s("wmKo"),_t=s.n(gt),bt=s("kxiW"),St=s.n(bt);s("881v");i.default.use(_t.a);var Ct=St.a.initializeApp({apiKey:"AIzaSyDlxhs9sd8m_qWoqKXy1K-2XXfZxa6UUoQ",authDomain:"beetle-demo.firebaseapp.com",databaseURL:"https://beetle-demo.firebaseio.com",projectId:"beetle-demo",storageBucket:"beetle-demo.appspot.com",messagingSenderId:"68357144215"}),wt=Ct.firestore(),Et=Ct.storage().ref();wt.settings({timestampsInSnapshots:!0}),i.default.prototype.$db=wt,i.default.prototype.$storage=Et,i.default.use(xt.a,w.a),i.default.config.productionTip=!1;var Tt=new i.default({el:"#app",router:h,store:B,template:"<App/>",components:{App:ft},methods:{init:function(){ble.startScan([],function(t){console.log(a()(t))},function(t){console.log(t)}),setTimeout(ble.stopScan,5e3,function(){},function(){})}}});document.addEventListener("deviceready",Tt.init,function(t){console.log(t)})},PvA9:function(t,e){},QNNt:function(t,e){},Wq7f:function(t,e){},X8zv:function(t,e,s){t.exports=s.p+"static/img/logo.51d5292.png"},cP3D:function(t,e){},s6ZO:function(t,e){},yHQA:function(t,e){},zqwB:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5be099b20189ddd7babc.js.map